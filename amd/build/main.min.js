define("local_student/main",["exports","jquery","core/modal_factory","core/modal_events"],(function(_exports,_jquery,_modal_factory,_modal_events){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_modal_factory=_interopRequireDefault(_modal_factory),_modal_events=_interopRequireDefault(_modal_events);_exports.init=()=>{(0,_jquery.default)(".local_student--delete").on("click",(e=>{let id=Number.parseInt(e.target.text.split("-")[1]);_modal_factory.default.create({type:_modal_factory.default.types.SAVE_CANCEL,title:"Confirm delete",body:"Do you want to delete this record?"}).then((modal=>{modal.setSaveButtonText("Delete"),modal.getRoot().on(_modal_events.default.save,(()=>{let url=new URL("http://localhost/moodle/webservice/rest/server.php"),params={id:id,wstoken:"4a657cdb29cf703b5a81c08e9a3a7c2b",wsfunction:"local_student_delete",moodlewsrestformat:"json"};url.search=new URLSearchParams(params).toString(),console.log(url),fetch(url,{method:"GET"}).then((respose=>{if(!respose.ok)throw Error("Database operation failed!");return respose.json()})).then((data=>(console.log(data),window.location.href=(0,_jquery.default)(location).attr("href"),data))).catch((e=>{alert(e.message)}))})),modal.show()}))}))}}));

//# sourceMappingURL=main.min.js.map